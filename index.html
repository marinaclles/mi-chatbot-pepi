<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Chatbot BilingÃ¼e Pepi</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/botui/build/botui.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/botui/build/botui-theme-default.css" />
</head>
<body>

<div id="botui-app">
  <bot-ui></bot-ui>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/botui/build/botui.min.js"></script>
<script>
  var botui = new BotUI('botui-app');
  let lang = 'es'; // idioma por defecto

  // âœ¨ Objeto con todas las traducciones (para mantener ordenado)
  const translations = {
    es: {
      chooseLanguage: 'Elige un idioma:',
      greeting: 'Â¡Hola! Soy Pepi, Â¿en quÃ© puedo ayudarte?',
      options: [
        { text: 'ğŸ“… Horario', value: 'horario' },
        { text: 'ğŸ“ UbicaciÃ³n', value: 'ubicacion' },
        { text: 'ğŸ“ Contacto', value: 'contacto' },
        { text: 'ğŸ’¼ Servicios', value: 'servicios' },      // Nuevo âœ¨
        { text: 'ğŸ’° Precios', value: 'precios' }           // Nuevo âœ¨
      ],
      responses: {
        horario: 'â° Abrimos de lunes a viernes (9:00 - 18:00).',
        ubicacion: 'ğŸ—ºï¸ Estamos en Calle Ejemplo 123, Valencia.',
        contacto: 'ğŸ“ LlÃ¡manos al 123 456 789 o escribe a info@ejemplo.com.',
        servicios: 'ğŸ”§ Ofrecemos: Desarrollo Web, Chatbots y SEO.',  // Nuevo âœ¨
        precios: 'ğŸ’µ Consulta nuestros paquetes desde $100/mes.'      // Nuevo âœ¨
      },
      backButton: 'â†© Volver al inicio'
    },
    en: {
      chooseLanguage: 'Choose a language:',
      greeting: 'Hi! I\'m Pepi, how can I help you?',
      options: [
        { text: 'ğŸ“… Hours', value: 'horario' },
        { text: 'ğŸ“ Location', value: 'ubicacion' },
        { text: 'ğŸ“ Contact', value: 'contacto' },
        { text: 'ğŸ’¼ Services', value: 'servicios' },       // Nuevo âœ¨
        { text: 'ğŸ’° Pricing', value: 'precios' }           // Nuevo âœ¨
      ],
      responses: {
        horario: 'â° We\'re open Monday to Friday (9:00 AM - 6:00 PM).',
        ubicacion: 'ğŸ—ºï¸ Find us at 123 Example Street, Valencia.',
        contacto: 'ğŸ“ Call us at 123 456 789 or email info@example.com.',
        servicios: 'ğŸ”§ We offer: Web Development, Chatbots, and SEO.',  // Nuevo âœ¨
        precios: 'ğŸ’µ Check our packages starting at $100/month.'        // Nuevo âœ¨
      },
      backButton: 'â†© Back to start'
    }
  };

  // FunciÃ³n para iniciar el chatbot
  function startChat() {
    botui.message.add({
      content: translations[lang].greeting
    }).then(showOptions);
  }

  // FunciÃ³n para mostrar opciones (reutilizable)
  function showOptions() {
    botui.action.button({
      action: translations[lang].options
    }).then(function (res) {
      botui.message.add({
        content: translations[lang].responses[res.value]
      }).then(function () {
        // âœ¨ BotÃ³n para volver al inicio
        botui.action.button({
          action: [{
            text: translations[lang].backButton,
            value: 'back'
          }]
        }).then(startChat); // Vuelve a empezar
      });
    });
  }

  // Primer mensaje (elige idioma)
  botui.message.add({
    content: translations.es.chooseLanguage
  }).then(function () {
    return botui.action.button({
      action: [
        { text: 'EspaÃ±ol ğŸ‡ªğŸ‡¸', value: 'es' },
        { text: 'English ğŸ‡¬ğŸ‡§', value: 'en' }
      ]
    });
  }).then(function (res) {
    lang = res.value;
    startChat(); // Inicia el flujo principal
  });
</script>

</body>
</html>